<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
    <head>
        <title th:text="${title}">Загадка | Интернет-магазин</title>
        <meta charset="UTF-8" />
        <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css">
        <link rel="icon" type="image/png" th:href="@{/logo.png}">
        <link rel="stylesheet" th:href="@{/css/styles.css}">

    </head>
    <body>

    <div th:replace="blocks/header :: header"></div>

    <!-- HERO-SECTION -->
    <section id="hero" class="hero d-flex flex-column justify-content-center align-items-center text-center text-light">
        <img th:src="@{/logo.png}" alt="Логотип Загадка" class="hero-logo mb-4">

        <h1 class="display-4 fw-bold hero-text mb-4">
            «Тренды меняются, <br><em>Загадка</em> живёт вечно»
        </h1>

        <!-- Анимированный бесконечный текст -->
        <div class="loop-container">
            <div class="loop-text">✦ Загадка ✦ Секрет в стиле ✦ Загадка ✦ Твоя индивидуальность ✦</div>
            <div class="loop-text">✦ Загадка ✦ Секрет в стиле ✦ Загадка ✦ Твоя индивидуальность ✦</div>
        </div>
    </section>

    <!-- Основной контент -->
    <main class="container my-5 fade-section">
        <div class="row g-4 justify-content-center">
            <div class="col-12 col-sm-6 col-md-4 col-lg-3" th:each="el : ${products}">
                <div class="card h-100 shadow-sm border-0">
                    <a th:href="@{/product/{id}(id=${el.id})}">
                        <img th:src="${el.photo_link}" class="card-img-top" style="object-fit: cover; height: 250px;" alt="Фото товара">
                    </a>
                    <div class="card-body text-center">
                        <a th:href="@{/product/{id}(id=${el.id})}" class="text-dark text-decoration-none">
                            <h5 class="card-title fw-bold" th:text="${el.name}"></h5>
                        </a>
                        <p class="card-text text-muted"
                           th:text="${#numbers.formatInteger(el.price, 0, 'WHITESPACE') + ' ₽'}"></p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <div th:replace="blocks/footer :: footer"></div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>

    <!-- Скрипт анимации при скролле hero-секции -->
    <script>
        window.addEventListener('scroll', () => {
            const hero = document.getElementById('hero');
            const scrollY = window.scrollY;

            if (scrollY > 100) {
                hero.classList.add('fade-out');
            } else {
                hero.classList.remove('fade-out');
            }
        });
    </script>

    <!-- Анимация появления карточек -->
    <script>
        document.addEventListener("DOMContentLoaded", () => {
          const fadeSection = document.querySelector(".fade-section");

          const observer = new IntersectionObserver(entries => {
            entries.forEach(entry => {
              if (entry.isIntersecting) {
                entry.target.classList.add("visible");
                observer.unobserve(entry.target);
              }
            });
          }, { threshold: 0.2 });

          observer.observe(fadeSection);
        });
    </script>
    </body>




</html>
